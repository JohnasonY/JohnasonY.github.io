<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <title>Title</title>

</head>

<body>
<nav class="navbar navbar-expand-lg bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="../index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../lab3/lab3.html">Lab3</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../lab4/lab4.html">Lab4</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./lab5.html">Lab5</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../lab6/lab6.html">Lab6</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <h1 class="display-4">Game Deal</h1>
            <p class="lead">Get game's deals on every platform based on your account preference.</p>
        </div>
    </div>

    <div class="mx-auto p-2" style="width: 40%;">
        <h1 class="display-5">Sign Up</h1>
    </div>

    <form id="RegistrationForm">
        <div class="mx-auto p-2" style="width: 40%;">
            <label for="fname" class="form-label"><h5>First Name</h5></label> <input class="form-control form-control-lg" id="fname">
            <span>Must not empty</span><br>
            <label for="lname" class="form-label"><h5>Last Name</h5></label> <input class="form-control form-control-lg" id="lname">
            <span>Must not empty</span><br>
            <label for="email" class="form-label"><h5>Email</h5></label> <input class="form-control form-control-lg" id="email" placeholder="name@examle.com">
            <span>Must not empty</span><br>
            <label for="password" class="form-label"><h5>Password</h5></label> <input type="password" class="form-control form-control-lg" id="password">
            <div id="passwordHelpBlock" class="form-text">
                Your Password must have at least one '?' or '!'
            </div>

            <label for="DOB" class="form-label"><h5>Date of Birth</h5></label>
            <div class="row" id="DOB">
                 <div class="col">
                     <label for="month" class="form-label"></label> <input class="form-control form-control-lg" id="month" placeholder="Month">
                     <span>Must be <=current month</span>
                 </div>
                <div class="col">
                    <label for="day" class="form-label"></label> <input class="form-control form-control-lg" id="day" placeholder="Day">
                    <span>Must be <=current day</span>
                </div>
                <div class="col">
                    <label for="year" class="form-label"></label> <input class="form-control form-control-lg" id="year" placeholder="Year">
                    <span>Must be <=current year</span>
                </div>
            </div>

            <br>
        </div>

    </form>

    <div class="mx-auto p-2" style="width: 40%;">
        <button class="btn btn-primary" onclick="verifyForm()">Finish</button>
    </div>

    <div class="mx-auto p-2" style="width: 40%;">
        <div id="accountInfo"></div>
    </div>

    <script>
        //verify first name
        const firstName = document.getElementById("fname");
        function verifyFname(){
            if(firstName.value === "")
                return false;
            else
                return true;
        }

        //verify last name
        const lastName = document.getElementById("lname");
        function verifyLname(){
            if(lastName.value === "")
                return false;
            else
                return true;
        }

        //verify email
        const email = document.getElementById("email");
        function verifyEmail(){
            if(email.value === "")
                return false;
            else
                return true;
        }

        //verify password
        const password = document.getElementById("password");
        function verifyPassword(){
            for(i = 0; i < password.value.length; i++){
                if(password.value.charAt(i) == "?" || password.value.charAt(i) == "!")
                    return true;
            }
            return false;
        }

        //verify month
        const month = document.getElementById("month");
        function verifyMonth(){
            if(month.value === "" || month.value < 1 || month.value > 12) {
                return false;
            }
            else
                return true;
        }

        //verify day
        const day = document.getElementById("day");
        function verifyDay(){
            const currentDay = new Date().getDay();
            if(day.value === "" || day.value < 1 || day.value > 31){
                return false;
            }
            else{
                return true;
            }
        }

        //verify year
        const year = document.getElementById("year");
        function verifyYear(){
            const currentYear = new Date().getFullYear();
            if(year.value === "" || year.value > currentYear){
                return false;
            }
            else{
                return true;
            }
        }

        //verify Form
        function verifyForm(){
            const form = document.getElementById("RegistrationForm");

            let failString = "Invalid: ";
            if(!verifyFname())
                failString += "First name, ";
            if(!verifyLname())
                failString += "Last name, ";
            if(!verifyEmail())
                failString += "Email, ";
            if(!verifyPassword())
                failString += "Password, ";
            if(!verifyMonth())
                failString += "Month, ";
            if(!verifyDay())
                failString += "Day, ";
            if(!verifyYear())
                failString += "Year, ";

            if(!verifyFname() || !verifyLname() || !verifyEmail() || !verifyPassword() || !verifyMonth() || !verifyDay() || !verifyYear()){
                alert("Registration Fail. Reason: " + failString);
            }
            else{

                alert("Registration Succeed!");

                let displayPW = "";
                for(i=0; i<password.value.length; i++)
                    displayPW += "*";

                const User = {
                    firstname: firstName.value,
                    lastname: lastName.value,
                    Email: email.value,
                    Password: displayPW,
                    Month: month.value,
                    Day: day.value,
                    Year: year.value
                };

                const accountInfo = document.getElementById("accountInfo");
                accountInfo.innerHTML = "<b>Your account information:</b><br>" +
                    "First Name: " + User.firstname + "<br>" +
                    "Last Name: " + User.lastname + "<br>" +
                    "Email: " + User.Email + "<br>" +
                    "Password: " + User.Password + "<br>" +
                    "Date of Birth: " + User.Month + "/" + User.Day + "/" + User.Year;

            }


        }





    </script>
</body>
</html>
